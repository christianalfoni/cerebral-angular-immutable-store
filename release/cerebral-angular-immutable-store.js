!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define(["angular"],t):"object"==typeof exports?exports.Cerebral=t(require("angular")):e.Cerebral=t(e.angular)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={exports:{},id:r,loaded:!1};return e[r].call(i.exports,i,i.exports,t),i.loaded=!0,i.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){(function(t){var r=n(9),i=t.angular||n(15),o=n(10),a=n(13).EventEmitter,s=r.Value,u=function(e,t){var n=new a,i=o(e);e=i;var u=r.Controller({defaultArgs:t,onReset:function(){e=i},onSeek:function(t,r,i){e=e["import"](i.initialState),n.emit("change",e)},onUpdate:function(){n.emit("change",e)},onGet:function(t){return s(t,e)},onSet:function(t,n){var r=t.pop();e=s(t,e).set(r,n)},onUnset:function(t,n){e=s(t,e).unset(n)},onPush:function(t,n){e=s(t,e).push(n)},onSplice:function(){var t=[].slice.call(arguments),n=s(t.shift(),e);e=n.splice.apply(n,t)},onMerge:function(t,n){e=s(t,e).merge(n)},onConcat:function(){var t=[].slice.call(arguments),n=s(t.shift(),e);e=n.concat.apply(n,t)},onPop:function(t){e=s(t,e).pop()},onShift:function(t,n){e=s(t,e).shift(n)},onUnshift:function(t){e=s(t,e).unshift()}});return u.injectState=function(t,r){var i=function(n){Object.keys(r).forEach(function(i){t[i]=s(r[i],n||e)}),n&&t.$apply()};t.$on("$destroy",function(){n.off("change",i)}),n.on("change",i),i()},u};i.module("cerebral",[]).provider("cerebral",function(){var e=["$http"],t={},n={};this.setState=function(e){t=e},this.setDefaultArgs=function(e){n=e},this.$get=e.concat([function(){var r=arguments;return n.services=e.reduce(function(e,t,n){return e[t]=r[n],e},{}),new u(t,n)}])}),e.exports=i}).call(t,function(){return this}())},function(e,t){(function(t){e.exports={getFunctionName:function(e){var t=e.toString();return t=t.substr("function ".length),t=t.substr(0,t.indexOf("("))},merge:function(e,t){return t=t||{},Object.keys(t).reduce(function(e,n){return e[n]=t[n],e},e)},hasLocalStorage:function(){return"undefined"!=typeof t.localStorage},isPathObject:function(e){return e&&(e.resolve||e.reject)},debounce:function(e,t,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||e.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}}}}).call(t,function(){return this}())},function(e,t){"use strict";var n={toJS:function(e){return e instanceof Array?e.map(function(e){return n.toJS(e)}):"object"==typeof e&&null!==e?Object.keys(e).reduce(function(t,r){return t[r]=n.toJS(e[r]),t},{}):e},"export":function(e,t){return e instanceof Array?e.map(function(e){return n["export"](e,t)}):"object"==typeof e&&null!==e?Object.keys(e).reduce(function(r,i){return e.__&&t.get(e,i)?r[i]=t.get(e,i).value:r[i]=n["export"](e[i],t),r},{}):e},"import":function(e,t,r){return Object.keys(e).reduce(function(i,o){if(e[o]instanceof Array||"object"!=typeof e[o]||null===e[o]||!n.getByPath(i,r))return n.getByPath(i,r).set(o,e[o]);r.push(o);var a=n["import"](e[o],t,r);return r.pop(),a},t.currentStore)},getByPath:function(e,t){return t.reduce(function(e,t){return e[t]},e)},isSame:function(e,t){return Object.keys(e).reduce(function(n,r){return n?e[r]===t[r]:!1},!0)},copyObject:function(e){return Object.keys(e).reduce(function(t,n){return t[n]=e[n],t},{})}};e.exports=n},function(e,t,n){var r=n(2);e.exports=function(e){return{set:function(t,n,i,o){t.__.currentMapping[t.__.path.slice().concat(n).join("")]=r.copyObject(i);var a=i.value,s=null,u=null,c=e.currentStore,l=function(){return Object.keys(i.deps).reduce(function(t,n){return t[n]=r.getByPath(e.currentStore,i.deps[n]),t},{})},p=function(){var e=l();return r.isSame(e,u)};Object.defineProperty(t,n,{get:function(){return o&&(e.currentStore=o),c!==e.currentStore?(u=l(),i.get(a,u)):u&&p()?s=i.get(a,u):u?s:(u=l(),i.get(a,u))},set:function(e){a=e,i.value=e},enumerable:!0,configurable:!0})},get:function(t,n){return e.currentStore.__.currentMapping[t.__.path.slice().concat(n).join("")]}}}},function(e,t,n){n(1);e.exports=function(e,t,n){var r=null,i=null,o=[],a=0,s=null,u=null,c=!1,l=!1,p=!1,f=0;return{seek:function(a,u){if(clearTimeout(i),o.forEach(clearTimeout),n.onSeek&&n.onSeek(a,!!u,r),!e.isRemembering()){var l=function(e){for(var n=e.name.split("."),r=t;n.length;)r=r[n.shift()];r.call(null,e.payload,e.asyncActionResults.slice())},f=r.signals.filter(function(e){return e.start-r.start<a});if(p=!0,f.forEach(l),p=!1,u){this.createTimer();for(var h=r.signals.length,g=f.length,m=g;h>m;m++){var v=r.signals[m],d=v.start-r.start-a;o.push(setTimeout(l.bind(null,v),d))}c=!0,s=Date.now()}o.push(setTimeout(function(){c=!1,n.onUpdate&&n.onUpdate()},r.end-r.start-a)),n.onUpdate&&n.onUpdate()}},createTimer:function(){var e=function(){a+=500,n.onDurationChange&&n.onDurationChange(a),a<r.duration&&(i=setTimeout(e,500),n.onUpdate&&n.onUpdate())}.bind(this);i=setTimeout(e,500)},resetState:function(){n.onRecorderReset&&n.onRecorderReset(r.initialState)},record:function(t,i){e.isRemembering()||(r&&this.resetState(),r={initialState:t,start:Date.now(),signals:[],meta:i},l=!0,n.onUpdate&&n.onUpdate())},stop:function(){var t=c;if(clearTimeout(i),c=!1,l=!1,!e.isRemembering()&&!t){if(e.isExecutingAsync())throw new Error("Cerebral - You can not stop when async signals are running, make sure to handle that with: cerebral.hasExecutingSignal()");r.end=Date.now(),r.duration=r.end-r.start,n.onUpdate&&n.onUpdate()}},pause:function(){if(e.isExecutingAsync())throw new Error("Cerebral - You can not stop when async signals are running, make sure to handle that with: cerebral.hasExecutingSignal()");e.isRemembering()||(u=Date.now(),f=u-s,clearTimeout(i),o.forEach(clearTimeout),n.onUpdate&&n.onUpdate())},addSignal:function(e){r.signals.push(e)},isRecording:function(){return l},isPlaying:function(){return c},isCatchingUp:function(){return p},getRecording:function(){return r},getCurrentSeek:function(){return f}}}},function(e,t,n){(function(t){var r=n(1),i=n(8),o=[],a=!1,s=t.requestAnimationFrame||function(e){setTimeout(e,0)};e.exports=function(e,t,n,u){return function(){var c=[].slice.call(arguments),l=c.shift(),p=c;return function(){var c=p.slice(),f=arguments[0]===!0,h=f,g=f?arguments[1]:arguments[0],m=f?arguments[2]:arguments[1],v=function(){var o=g||{},a={name:l,actions:[],duration:0,start:Date.now(),payload:g,asyncActionResults:[]};t.isRecording()&&t.addSignal(a),e.addSignal(a);var s=function(){if(c.length){var l=c.shift();if(Array.isArray(l)){var p=l,f=p.filter(function(e){return"function"==typeof e}),h=p[p.length-1];e.isRemembering()||t.isPlaying()?(d=m.shift(),r.merge(o,d.result),r.isPathObject(h)&&(d.resolved?h.resolve:h.reject)&&c.splice.apply(c,[0,0].concat(d.resolved?h.resolve:h.reject)),s()):(u.onUpdate&&u.onUpdate(),e.addAsyncAction(),Promise.all(f.map(function(e){var t=i.async(a.actions,o,u),n={name:r.getFunctionName(e),isParallell:f.length>1,duration:0,mutations:[],isAsync:!0};return a.actions.push(n),new Promise(function(n,r){e.apply(null,t.concat({resolve:n,reject:r}))})})).then(function(t){var n=t.reduce(function(e,t){return r.merge(e,t),e},{});e.removeAsyncAction(),a.asyncActionResults.push({resolved:!0,result:n}),r.merge(o,n),r.isPathObject(h)&&h.resolve&&c.splice.apply(c,[0,0].concat(h.resolve)),s()})["catch"](function(t){e.removeAsyncAction(),a.asyncActionResults.push({resolved:!1,result:t}),r.merge(o,t),r.isPathObject(h)&&h.reject&&c.splice.apply(c,[0,0].concat(h.reject)),s()}),n&&n.update())}else{var g=i.sync(a.actions,o,u),v={name:r.getFunctionName(l),duration:0,isParallell:!1,mutations:[],isAsync:!1};a.actions.push(v);var d=l.apply(null,g);r.merge(o,d),s()}}else e.isRemembering()||t.isCatchingUp()||(u.onUpdate&&u.onUpdate(),n&&n.update())};s()};h||e.isRemembering()||t.isCatchingUp()?v():(o.push(v),a||(s(function(){for(;o.length;)o.shift()();a=!1}),a=!0))}}}}).call(t,function(){return this}())},function(e,t,n){(function(t){var r=n(1);e.exports=function(e,n){var i=r.hasLocalStorage()&&localStorage.getItem("cerebral_signals")?JSON.parse(localStorage.getItem("cerebral_signals")):[],o="production"===t.env.NODE_ENV?!1:r.hasLocalStorage()&&localStorage.getItem("cerebral_willKeepState")?JSON.parse(localStorage.getItem("cerebral_willKeepState")):!1,a=0,s=!1,u=i.length-1;return{toggleKeepState:function(){o=!o},addAsyncAction:function(){a++},removeAsyncAction:function(){a--},addSignal:function(e){u++,s||(o||(i=[],u=0),u<i.length&&i.splice(u,i.length-u),i.push(e))},rememberNow:function(){i.length&&this.remember(i.length-1)},reset:function(){s||(i=[],u=-1,n.onReset&&n.onReset())},remember:function(t){if(s=!0,n.onReset&&n.onReset(),-1===t)u=t,s=!1;else{u=-1;try{for(var r=0;t>=r;r++){var o=i[r];if(!o)break;for(var a=o.name.split("."),c=e;a.length;)c=c[a.shift()];c.call(null,o.payload,o.asyncActionResults.slice()),u=r}s=!1}catch(l){s=!1,this.reset()}}n.onUpdate&&n.onUpdate()},getSignals:function(){return i},isExecutingAsync:function(){return!!a},isRemembering:function(){return s},willKeepState:function(){return o},getCurrentIndex:function(){return u}}}}).call(t,n(14))},function(e,t,n){var r=n(1);e.exports=function(e,t){var n=function(){return{props:{signals:e.getSignals(),willKeepState:e.willKeepState(),currentSignalIndex:e.getCurrentIndex(),isExecutingAsync:e.isExecutingAsync(),isRemembering:e.isRemembering()}}},i=r.debounce(function(){var e=new CustomEvent("cerebral.dev.update",{detail:n()});window.dispatchEvent(e)},50),o=function(){var e=new CustomEvent("cerebral.dev.initialized",{detail:n()});window.dispatchEvent(e)};return window.addEventListener("cerebral.dev.initialize",function(){e.remember(e.getSignals().length-1),o()}),o(),window.addEventListener("cerebral.dev.toggleKeepState",function(){e.toggleKeepState(),i()}),window.addEventListener("cerebral.dev.toggleStoreState",function(){e.toggleStoreState(),i()}),window.addEventListener("cerebral.dev.resetStore",function(){e.reset(),t.onUpdate&&t.onUpdate(),i()}),window.addEventListener("cerebral.dev.remember",function(t){e.remember(t.detail),i()}),window.addEventListener("cerebral.dev.rememberNow",function(){console.log("GOT EVENT!"),e.remember(e.getCurrentIndex()),i()}),window.addEventListener("cerebral.dev.logPath",function(e){var n=e.detail.name,r=t.onGet(e.detail.path);console.log("CEREBRAL - "+n+":",r.toJS?r.toJS():r)}),window.addEventListener("unload",function(){r.hasLocalStorage()&&localStorage.setItem("cerebral_signals",JSON.stringify(e.getSignals())),r.hasLocalStorage()&&localStorage.setItem("cerebral_willKeepState",JSON.stringify(e.willKeepState()))}),{update:i}}},function(e,t,n){var r=n(1),i=function(e,t){return function(n,r){return n[r.toLowerCase()]=function(){if("Get"===r){var n="string"==typeof arguments[0]?[].slice.call(arguments):arguments[0];return t.onGet&&t.onGet(n)}var n=1===arguments.length?[]:"string"==typeof arguments[0]?[arguments[0]]:arguments[0],i=1===arguments.length?[].slice.call(arguments):[].slice.call(arguments).splice(1);return e[e.length-1].mutations.push({name:r.toLowerCase(),path:n.slice(),args:i}),t["on"+r]&&t["on"+r].apply(null,[n].concat(i))},n}};e.exports={sync:function(e,t,n){return[r.merge(r.merge({},t),n.defaultArgs||{}),["Get","Set","Unset","Push","Concat","Shift","Unshift","Merge","Splice","Pop"].reduce(i(e,n),{})]},async:function(e,t,n){return[r.merge(r.merge({},t),n.defaultArgs||{}),["Get"].reduce(i(e,n),{})]}}},function(e,t,n){var r=n(5),i=n(6),o=n(4),a=n(7);e.exports={Controller:function(e){e=e||{};var t={},n=i(t,e);if("undefined"!=typeof window)var s=a(n,e);var u=o(n,t,e),c=r(n,u,s,e);return{signal:function(){t[arguments[0]]=c.apply(null,arguments)},signals:t,store:n,recorder:u,get:function(){var t=arguments.length?"string"==typeof arguments[0]?[].slice.call(arguments):arguments[0]:[];return e.onGet(t)}}},Value:function(e,t){for(e=e.slice();e.length;)t=t[e.shift()];return t}}},function(e,t,n){"use strict";function r(e){if(!e||"object"!=typeof e||Array.isArray(e)||null===e)throw new Error("You have to pass an object to the store");var t={currentPath:[],currentStore:null,mapper:null,currentMapping:{},update:function(e,n){return t.currentMapping=s.copyObject(t.currentMapping),t.currentStore=l(t,e,n),t.currentStore},updateMapping:function(e,n,r){return t.currentStore=l(t,e,function(e,t,i){t.mapper.set(e,n,t.mapper.get(e,n)),t.currentPath.push(n),e[n]=r,t.currentPath.pop()}),t.currentStore}};return t.mapper=a(t),t.currentStore=p(t,e),t.currentStore}var i=n(11),o=n(12),a=n(3),s=n(2),u=function(e,t){return Array.isArray(e)?i(e,t):"object"==typeof e&&null!==e?o(e,t):e},c=function(e,t){if(Array.isArray(t)&&!t.__){var n=t.map(function(t,n){e.currentPath.push(n);var r=c(e,t);return e.currentPath.pop(),r}),r=i(n,e);return Object.freeze(r),r}if("object"!=typeof t||null===t||t.__)return t;var a=Object.keys(t).reduce(function(n,r){return e.currentPath.push(r),n[r]=c(e,t[r]),e.currentPath.pop(),n},{}),s=o(a,e);return Object.freeze(s),s},l=function(e,t,n){e.currentPath=[];var r=t.__.path;r.length||(e.currentStore=t);var i=u(e.currentStore,e),a=i;r.forEach(function(t){e.currentPath.push(t),a[t]=u(a[t],e),a=a[t]}),n(a,e,c),a=i,r.forEach(function(t){a=a[t],Object.freeze(a),e.currentPath.pop()});var l=o(i,e);return Object.keys(i).forEach(function(t){var n=Object.getOwnPropertyDescriptor(i,t);n&&n.get&&n.set?Object.defineProperty(l,t,{get:function(){return e.currentStore=this,n.get()}}):Object.defineProperty(l,t,{enumerable:!0,get:function(){return e.currentStore=this,i[t]}})}),Object.defineProperty(l,"export",{enumerable:!1,value:function(){return s["export"](l,e.mapper)}}),Object.defineProperty(l,"import",{enumerable:!1,value:function(t){return s["import"](t,e,[])}}),Object.freeze(l),l},p=function(e,t){var n=o({},e);return Object.keys(t).forEach(function(r){e.currentPath.push(r);var i=c(e,t[r]);e.currentPath.pop(r),"function"==typeof t[r]?e.mapper.set(n,r,t[r](),n):Object.defineProperty(n,r,{enumerable:!0,get:function(){return e.currentStore=this,i}})}),Object.defineProperty(n,"export",{enumerable:!1,value:function(){return s["export"](n,e.mapper)}}),Object.defineProperty(n,"import",{enumerable:!1,value:function(t){return s["import"](t,e,[])}}),Object.freeze(n),n};e.exports=r},function(e,t,n){"use strict";var r=n(2),i=function(){function e(t){var n=Array.apply(Array);return n=n.concat(t),n.__proto__=e.prototype,n}return e.prototype=Object.create(Array.prototype),e.prototype.push=function(e){return this.__.update(this,function(t,n,r){n.currentPath.push(t.length),Array.prototype.push.call(t,r(n,e)),n.currentPath.pop()})},e.prototype.splice=function(){var e=[].slice.call(arguments,0),t=e.shift(),n=e.shift();return this.__.update(this,function(r,i,o){var a=e.map(function(e,n){i.currentPath.push(t+n);var r=o(i,e);return i.currentPath.pop(),r});Array.prototype.splice.apply(r,[t,n].concat(a));for(var s=t;s<r.length;s++)if(r[s].__){var u=r[s].__.path;u[u.length-1]=s}})},e.prototype.concat=function(){var e=[].slice.call(arguments,0);return this.__.update(this,function(t,n,r){e.map(function(e){Array.isArray(e)?e.map(function(e){n.currentPath.push(t.length),Array.prototype.push.call(t,r(n,e)),n.currentPath.pop()}):(n.currentPath.push(t.length),Array.prototype.push.call(t,r(n,e)),n.currentPath.pop())})})},e.prototype.unshift=function(e){return this.__.update(this,function(t,n,r){Array.prototype.unshift.call(t,r(n,e));for(var i=0;i<t.length;i++)if(t[i].__){var o=t[i].__.path;o[o.length-1]=i}})},e.prototype.shift=function(){return this.__.update(this,function(e,t,n){Array.prototype.shift.call(e);for(var r=0;r<e.length;r++)if(e[r].__){var i=e[r].__.path;i[i.length-1]=r}})},e.prototype.pop=function(){return this.__.update(this,function(e){Array.prototype.pop.call(e)})},e.prototype.toJS=function(){return r.toJS(this)},function(t,n){var r=new e(t);return Object.defineProperty(r,"__",{value:{path:n.currentPath.slice(0),update:n.update}}),r}};e.exports=i()},function(e,t,n){"use strict";var r=n(2),i=(n(3),function(){var e={set:function(e,t){return this.__.update(this,function(n,r,i){Array.isArray(t)&&t.forEach(function(e,t){e.__&&(e.__.path[e.__.path.length-1]=t)}),r.currentPath.push(e),n[e]=i(r,t),r.currentPath.pop()})},toJS:function(){return r.toJS(this)},merge:function(e){if(Array.isArray(e)||"object"!=typeof e||null===e)throw new Error("You have to pass an object to the merge method");return this.__.update(this,function(t,n,r){Object.keys(e).forEach(function(i){n.currentPath.push(i),t[i]=r(n,e[i]),n.currentPath.pop()})})},unset:function(e){return this.__.update(this,function(t){delete t[e]})}};return function(t,n){var r=Object.create(e);return Object.defineProperty(r,"__",{value:{path:n.currentPath.slice(0),update:n.update,updateMapping:n.updateMapping,currentMapping:n.currentMapping}}),Object.keys(t).forEach(function(e){var i=Object.getOwnPropertyDescriptor(t,e);i&&i.get&&i.set?n.mapper.set(r,e,n.mapper.get(r,e)):"function"==typeof t[e]?n.mapper.set(r,e,t[e]()):r[e]=t[e]}),r}});e.exports=i()},function(e,t){function n(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function r(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=n,n.EventEmitter=n,n.prototype._events=void 0,n.prototype._maxListeners=void 0,n.defaultMaxListeners=10,n.prototype.setMaxListeners=function(e){if(!i(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},n.prototype.emit=function(e){var t,n,i,s,u,c;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if(t=arguments[1],t instanceof Error)throw t;throw TypeError('Uncaught, unspecified "error" event.')}if(n=this._events[e],a(n))return!1;if(r(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(i=arguments.length,s=new Array(i-1),u=1;i>u;u++)s[u-1]=arguments[u];n.apply(this,s)}else if(o(n)){for(i=arguments.length,s=new Array(i-1),u=1;i>u;u++)s[u-1]=arguments[u];for(c=n.slice(),i=c.length,u=0;i>u;u++)c[u].apply(this,s)}return!0},n.prototype.addListener=function(e,t){var i;if(!r(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,r(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned){var i;i=a(this._maxListeners)?n.defaultMaxListeners:this._maxListeners,i&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},n.prototype.on=n.prototype.addListener,n.prototype.once=function(e,t){function n(){this.removeListener(e,n),i||(i=!0,t.apply(this,arguments))}if(!r(t))throw TypeError("listener must be a function");var i=!1;return n.listener=t,this.on(e,n),this},n.prototype.removeListener=function(e,t){var n,i,a,s;if(!r(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],a=n.length,i=-1,n===t||r(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(n)){for(s=a;s-->0;)if(n[s]===t||n[s].listener&&n[s].listener===t){i=s;break}if(0>i)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},n.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],r(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},n.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?r(this._events[e])?[this._events[e]]:this._events[e].slice():[]},n.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?r(e._events[t])?1:e._events[t].length:0}},function(e,t){function n(){c=!1,a.length?u=a.concat(u):l=-1,u.length&&r()}function r(){if(!c){var e=setTimeout(n);c=!0;for(var t=u.length;t;){for(a=u,u=[];++l<t;)a[l].run();l=-1,t=u.length}a=null,c=!1,clearTimeout(e)}}function i(e,t){this.fun=e,this.array=t}function o(){}var a,s=e.exports={},u=[],c=!1,l=-1;s.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new i(e,t)),1!==u.length||c||setTimeout(r,0)},i.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=o,s.addListener=o,s.once=o,s.off=o,s.removeListener=o,s.removeAllListeners=o,s.emit=o,s.binding=function(e){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(e){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},function(t,n){t.exports=e}])});